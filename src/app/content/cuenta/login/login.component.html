<div class="vh-100 d-flex">
  <div class="left"></div>


  <div class="right d-flex flex-column justify-content-start  align-items-center">
    <div class=" pb-3 pt-3" style="width: 651px;">
      <img src="/img/Logos_P_Hacienda_ANAM.png" alt="Logo" width="100%">
    </div>
    <div class="p-4 login-card">
      <p class="text-center mb-4 text-xl-center fw-bolder fs-5 text-muted frmlabel">INICIAR SESIÓN</p>

      <form [formGroup]="loginForm">
        <div class="mb-3">

          <label class="form-label frmlabel " for="usuario">Usuario</label>
                    <div class="input-icon-wrapper">
                        <i
                            [ngClass]="getValidationStatus(loginForm,'usuario') == 'valid' ? 'fas fa-check-circle icon valid-icon' : getValidationStatus(loginForm,'usuario') == 'invalid' ? 'fas fa-times-circle icon invalid-icon': 'd-none'"></i>
                        <input type="text"  id="username" class=" w-100"  formControlName="usuario" autocomplete="off"
            placeholder="tu_correo@anam.gob.mx" required 
            class="form-control-login" [class.invalid]="getValidationStatus(loginForm,'usuario') == 'invalid'"
                            [class.valid]="getValidationStatus(loginForm, 'usuario') == 'valid'"      
            />
                    </div>
                    
        </div>

        <div class="mb-3 position-relative">

            <label class="form-label frmlabel " for="password">Contraseña</label>
                    <div class="input-icon-wrapper">
                        <i
                            [ngClass]="getValidationStatus(loginForm,'password') == 'valid' ? 'fas fa-check-circle icon valid-icon' : getValidationStatus(loginForm,'password') == 'invalid' ? 'fas fa-times-circle icon invalid-icon': 'd-none'"></i>
                       <input [type]="hiddenPassw ? 'text' : 'password'" id="password" class="w-100 pr-5"
             formControlName="password" autocomplete="off" placeholder="Contraseña" maxlength="255" 
             
             class="form-control-login" [class.invalid]="getValidationStatus(loginForm,'password') == 'invalid'"
                            [class.valid]="getValidationStatus(loginForm, 'password') == 'valid'"      
            />

          <i class="fas" [ngClass]="hiddenPassw ? 'fa-eye-slash' : 'fa-eye'" (click)="sethidden()"
            style="position: absolute; right: 45px; top: 16px; cursor: pointer; color: #6c757d;"></i>
                    </div>
                    

        </div>
        <div class="d-flex justify-content-end mt-3 mb-5">
          <div role="button" (click)="openOlvidarContrasenaModal()"
            class="hover-line-right_local text-decoration-none text-muted fw-bold text-gold">
            Olvidé mi contraseña
          </div>
        </div>
        

        <div *ngIf="error" class="alert alert-danger w-100">{{ error }}</div>

        <button type="submit" [disabled]="loginForm.invalid" class="btn w-100 mb-3" [ngClass]="{'disabled': loginForm.invalid, 'btn-success': loginForm.valid}"> 
              Ingresar <i class="fas fa-sign-in-alt ms-2"></i>
        </button>

      </form>
      <button (click)="openConfirmModal()" class="btn btn-secondary w-100">
        Solicitar cuenta
      </button>

      <div class="m-auto w-8  0 p-5 d-flex justify-content-around align-items-center">
            <span class="tooltip-wrapper center" [attr.data-tooltip]="'Manual de usuario'">
              <i class="info-btn-login p-2 fas fa-user-circle fa-2x"></i>
            </span>
            <span class="tooltip-wrapper center" [attr.data-tooltip]="'Aviso de privacidad'">
              <i class="info-btn-login p-2 fas fa-shield-alt fa-2x"></i>
            </span>
            <span class="tooltip-wrapper center" [attr.data-tooltip]="'Ayuda'">
              <i class="info-btn-login p-2 fas fa-question-circle fa-2x"></i>
            </span>
        
      </div>
    </div>


  </div>


</div>

<ng-template #crearCuentaModal>
  <div class="container">

    <form [formGroup]="crearCuentaForm">

      <div class="row">
        <div class="col-md-12">
          <label class="form-label frmlabel required" for="correo">Correo electrónico</label>
          <div class="input-icon-wrapper">
            <i
              [ngClass]="getValidationStatus(crearCuentaForm,'correo') == 'valid' ? 'fas fa-check-circle icon valid-icon' : getValidationStatus(crearCuentaForm,'correo') == 'invalid' ? 'fas fa-times-circle icon invalid-icon' : 'd-none'"></i>
            <input id="correo" type="email" class="form-control-login" formControlName="correo"
              placeholder="tu_correo@anam.gob.mx" [class.invalid]="getValidationStatus(crearCuentaForm,'correo') == 'invalid'"
              [class.valid]="getValidationStatus(crearCuentaForm,'correo') == 'valid'" />
          </div>
          <p *ngIf="getValidationStatus(crearCuentaForm,'correo') == 'invalid'" class="invalid-field">Correo inválido u obligatorio.</p>
        </div>

        <!-- Campo: RFC -->
        <div class="col-md-12">
          <label class="form-label frmlabel required" for="rfc">RFC</label>
          <div class="input-icon-wrapper">
            <i
              [ngClass]="getValidationStatus(crearCuentaForm,'rfc') == 'valid' ? 'fas fa-check-circle icon valid-icon' : getValidationStatus(crearCuentaForm,'rfc') == 'invalid' ? 'fas fa-times-circle icon invalid-icon' : 'd-none'"></i>
            <input id="rfc" type="text" class="form-control-login" formControlName="rfc" placeholder="RFC"
              [class.invalid]="getValidationStatus(crearCuentaForm,'rfc') == 'invalid'"
              [class.valid]="getValidationStatus(crearCuentaForm,'rfc') == 'valid'" />
          </div>
          <p *ngIf="getValidationStatus(crearCuentaForm,'rfc') == 'invalid'" class="invalid-field">RFC inválido u obligatorio.</p>
        </div>
      </div>

      <div class="mt-3 required"> Campos obligatorios</div>

      <div class="mt-3 carta-responsiva-area">
        <p class="text-muted">Deberás enviar tu carta firmada a la dirección de correo electrónico: <strong><a
              href="mailto:soporte_scg@anam.gob.mx">{{'soporte_scg@anam.gob.mx'}}</a> </strong>.</p>
        <p class="text-muted">Descargar carta responsiva <strong> <a href=""> aquí</a></strong>.</p>
      </div>
      <div class="mt-3 d-flex align-items-center justify-content-center">
        <button role="button" class="btn btn-primary" [disabled]="crearCuentaForm.invalid"> <i
            class="fas fa-share me-2"></i> Solicitar </button>
      </div>

    </form>

  </div>
</ng-template>
<ng-template #olvidarContrasenaModal>
  <div class="mt-3 carta-responsiva-area">
    <p class="text-muted">Envía tu solicitud de recuperación de contraseña a la dirección de correo electrónico:
      <strong><a
          href="mailto:soporte_scg@anam.gob.mx?subject=Recuperación de contraseña &body=Escribo para recuperar mi contraseña, mi usuario es: ...">{{'soporte_scg@anam.gob.mx'}}</a>
      </strong>.</p>

  </div>
</ng-template>


